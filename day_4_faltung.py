import numpy as np
from scipy.ndimage import convolve

test_input = """@@.@@.@.@@@@@@@.@@.@.@@.@.@@@.@@@@@@@.@@@.@.@@.@@@....@@.@@@@.@@@@@.@@@@.@...@@@.@@@@@@@.@.@@...@@.@@@..@@...@.@@@@@@.@@@.@.@...@.@@@@@@
@@.@@@@.@@@@@@@@@@.@@.@@.@..@@.@@@@@.@@@@@@.@@@@..@@@.@@@@..@@@@@..@@.@@@.@@.@@@.@@..@.@@..@@@@.@@@..@.@@@@@@@.@@.@@.@@.@..@@@@.@@.@@.@.
.@@..@@@@.@...@@.@@@@.@@@.@@@@@@@@@@...@@.@@@..@.@@@.@@@@..@@@...@@...@.@@@@@@.@@@@@@@.@@@..@@@@@@@.@@....@.@..@@@@@@@...@@@.@.@@..@@.@@
.@..@..@@@@.@@.@...@@@@@@.@.@@@@@@@@@@.@..@@.@...@@..@@.@@.@@.@..@@.@.@@@...@@.@@@@.@@@@@@@@@@@@@@.@.@.@@@@@.@.@..@@@.@.@@@.@.@..@@@.@@@
@@@.@@@@...@@.@@@@@@.@@@@@.@@..@@@..@.@@..@@.@.@@.@.@@@@@.@@.@@.@@..@@@.@..@@.@..@.@.@@@.@.@@@@@@@@..@@@..@@@.@@@@.@@@@..@@...@@@..@.@@.
@.@@..@@@@@@@...@@@.@@.@..@@..@.@@...@@@@@@@@.@.@@@...@@@@@@@@@@@.@.@@@.@.@@@@@..@@.@@@..@.@..@@.@..@@.@.@@.@@.@@@@@.@@.@@@@.@@@.@@@@@@.
..@..@.@@.@.@@@@@@@@@@@@.@@...@@..@@.@@.@..@@@@@@@@@@...@@@.@.@@@..@...@@.@.@@@@@@.@@@@@@.@@@@@@@.@@.@..@@@.@.@@..@@@..@@..@@.@@@.@.@@..
@.@@@@@.@@@@@.@....@@@@@...@.@.@@@@@@.@..@@@.@@.@@.@.@.@@.@....@.@.@@@..@@@@.@@@.@@@@@@@..@..@..@@@@.@@@@@@@.@@@.@...@@@@@@@@@@@@.@@@.@.
@@@@...@@.@@@.@@@@....@@@@@@@@..@@@.@@.@@.@..@...@@@.@.@@...@@.@@@@..@@@.@.@@..@@@.@@@...@@@.@@.@@@@@@@@.@@.@@@@@@@@..@@.@...@@...@@@@..
@@..@.@...@@@@@@@@...@@.@@.@@@@....@@@.@.@....@@@.@.@@@@@@..@..@@@@.@@@@@@@.@@@@@...@.@@@@.@@@..@@@@@.@@...@..@....@@@....@@@..@@.@@@@@@
...@@.@@@@@@@.@@@.@@@@@@@@@..@@@....@@@..@@@@.@.@....@@@@@@.@@@..@@@@@@@@@@@@.@@@..@@.@@@@.@...@.@..@@@..@.@...@@@@.@.@@@@@@@..@@..@@.@@
@@@.@@.@..@.@@@@@.@..@@@@@@.@@...@@@@@@@@.@@.@...@@.@@@.@@.@...@.@@@..@@@.@@..@.@@.@@.@..@.@.@.@@..@@@.@@@..@..@@@@.@@@@@@@@@..@@.@@@@@.
..@@@@..@@@@@..@@@@.@...@.@@@@@@@.@..@@@@..@..@.@@@@@.@@.@@..@@.@@@@@..@@@..@.@.@.@@@@@@@@.@@.@@.@..@@@@.@.@@..@.@@.@@.@.@.@.@@..@.@@@@@
@@@@.@@@@@.@.@..@@...@...@@@@@@.@@@.@@.@..@.@@.@@.@..@@.@@...@@@@.@@.@.@@...@.@@@.@@@@@@@..@..@@@.@@@.@@.@@@@.@@@..@@@@@@.@@@@@..@.@@@.@
.@@.@.@@.@.@@@@@.@@.@@@@@@@@..@@@@.@@@...@.@..@@@...@@...@@@@.@@@@@@@@..@@@@@@@@@.@@@@@.@...@...@.@.@.@@@@..@.@@..@@..@.@@@..@..@@@@@.@@
@@@.@@.@.@..@@...@.@@..@.@..@.@@@@@@.@@@@@.@@.@.@@@@@@@....@@@.@@..@@..@.@.@..@@@.@@@@...@@.@.@.@@@@..@@@.@@..@.@..@@@...@@.@.@@@@@@...@
@.@.@@@@..@....@@@@@@@.@.@@@.....@.@.@..@@@...@..@.@.@@@@.@@@@@@.@@@.@@.@..@.@@@@@@@.@..@....@@@@@@@.@@@.@@@@@@@..@@@...@@@..@@@.@@.@@@@
@.@@@@@@...@@@@@@.@@@@@@@@@.@.@.@..@.@.@@@.@@@@@@@@..@@.@.@@@.@..@@@@@.@@@@@@.@..@.@..@@@.....@.@@@@@@@@@@..@..@..@@@@..@@@.@@.@@@@@@..@
@@.@@@@..@.@.@@@.@.@@@.@@@@.@@.@@.@@@@@@@@@.@@@@..@@@@@.@@.@@@@.@@.....@.@..@@@@@.@@@@@@@.@@.@..@@@@..@@@.@@@.@...@@@@@.@@@@...@@@@@@@@@
.@....@@.@..@@@.@..@.@@.@@@......@@@@.@..@@..@@@@@.@@.@@@..@.@@@@@@.@@@...@@@...@....@@@@..@..@.@..@.@@.@@@@@..@.@@@.@@.@@@@.@@@..@.@@.@
..@..@@@@@@@.@..@@..@@.@@..@@@@@@@.@@@@@@.@@@@.@@@.@.@@@@.@@@..@..@.@.@@.@.@@..@.@@.@...@.@@@@@@@@@..@@@@@@@@@..@@...@.@@...@.@@@.@.@@.@
@@..@@@..@@@..@.@@..@.@@@.@@@.@..@@@.@@@@@..@.@.........@@@@@@.@@@@@@@@.@@@@@@@@@@@.@@.@@@...@@.@@@.@.@@.@@@..@@@@@@.@..@.@@.@@..@@.@...
@.@@@@@@@@@....@@@@@.@@@.@.@@.@@@@.@.@..@@..@@....@.@..@.@.@...@@.@@@.@..@@.@@.@@.@@..@.@..@@.@@..@@@@@@@.@@.@@@@@@@@..@..@.@...@...@.@@
.@@.@@..@.....@.@@.@..@.@@@..@@@@@.@@@.@@..@.@@.@..@@.@....@@.@@@@@@.@@..@@@.@@@@@@..@@@@..@@..@@@@@..@.@@@@@..@@....@..@@.@@.@@@..@@@@@
@@@@@.@@@@@..@@@.@..@@@@.@.@@@@@.@@@...@@@@.@@@.....@.@@@@@@@@@...@@.@@.....@@@.@.@.@@@..@@.@.@@.@@@@....@@@@@...@@@@..@@@@@.@@.@@@@@@.@
.@..@....@@..@.@.@.@@...@@..@@@@@@.@@..@@@@.@@@@@.@@.@@@@.@@@..@@@@.@.@@@@.@.@.@.@@.@@.....@@...@@@.@@.@@@@@.@@@@@@@@@@@@....@....@@.@@.
@@@.@.@.@@@@@.@.@@@..@@.@@@.@@@@.@@.@.@@.@@.@@@.@@.@@@@.@@.@.@.@@@@@.@@.@@@@@.@@.@@.@....@@.@.@@@@@.@@@.@@.@@..@@@@@.@..@.@@@@@@@@@.@...
.@@.@...@....@..@@@@.@@.@@@@..@.@.@.@@.@..@@@@@....@@@@@@.@@@..@@@.@@..@@...@@....@@@@@.@@.@@@.@..@@@@@.@.@@.....@@.@@@.@@...@@@.@@@@.@@
@.@.@@.@.@@.@..@@.@@@@.@@@@@.@@@@@@@@@@..@.@@.@@@@@@@@@@@@@.@@..@@.@.@@.@@@@@..@.@@@@.@@@...@.@.@@@@@.@@@@@.@@@...@@@.@..@@@.@...@...@@.
.@...@@@@@@...@@@@.@@@@@....@@@@@@.@.@@.@.@@@@.@@@@@.@.@@.@@@@.@@.@@.@@.@@...@@@.@.@@@@@..@@@@@...@.@..@@@@.@..@.@@.@@..@@.@@.@@@@.@.@@.
.@@@..@@@@@@@.@@.@@@@.@@@@@@@@@@.@@@@.@.@@@.@@@@.@@@.@@@@.@.@.@@@.@@..@@.@@@@.@@.@@@.@.@@@@...@@.@@@@@@..@@@..@@.@@@@@@@@..@..@.@.@.@@@@
.@.@@@@@.@@.@@@@@...@@.@@.@@@.@.@@..@@.@@@.@..@@@@.@..@@.@.@@@@@.@.@@@@@.@.@@...@@@.@@@@@@@@.@.@@@@.@.@@.@@.@@@@@@...@@@.@@@@@.@@..@.@@@
@...@@@@@@@@...@.@@.@@@@...@.@.@@.@..@.@@.....@@@@@@@...@@@@@@@@@@@@@@@..@@@@@.@@...@@.@..@@@.@@@@.@.@.@.@@@@@@@@@@@@@@@@@@@@@.@.@@...@@
.@@@@@@@@.@@@@@.@@@@.@@@@@@@@...@@@.@@@@@@..@@@@@@.@@@@@@@...@@@..@.@@@@@.@...@@@@..@@@.@.@@@.@@@@@@@@@@@...@@@@@@@@.@@@@@.@@.@@@@.@..@@
@@@@@.@@@...@.@@@@@@@..@@.@@@@..@@.@..@@@@@@@@@@@...@@@@.@@@......@.@@.@..@@..@...@.@.@@@.@@@.@@.@.@@@@.@.@..@.@@@@@@@@@@@@.@.@.@..@@..@
@@@@@@@@@.@@@@@@@@.@.@.@@.@@@...@...@@@.@.@@@.@@@...@@.@@@@@@.@@.@.@@@.@.@@@@@@@@@@.@.@.@@@..@@.@@..@.@@@...@...@@..@@@@@.@@@.@.@@@@@@..
@@..@...@@...@@@..@@@.@.@@@@@@.@.@@@@.@@...@.@@@.@@@.@@@.@@...@.@@@@@@@..@.@..@.@@@@.@@@..@@@@@..@@@@@..@@@@.@@..@@.@@.@@@.@@.@@...@@.@@
@.@..@.@@@@.@@.@.@.@....@@@@.@@@@@@.@@@@...@@@@@@.@@....@.@.@@@.@@.@.@@@..@...@@...@@@.@@@.@@@..@@@@@@..@@@@@@...@@@@@@.@.@@@.@@.@@@@@@@
@@@..@@.@@@..@..@@.@@..@..@@@@@@@@@.@@@....@@.@@.@..@@@..@@@@@@.@@.@.@@.@@@.@@.@.....@@@.@@..@@.@@@.@@..@@.@@....@.@.@@@@@@@.@..@@.@.@@@
.@.@.@@@@@@@.@@@@@@@...@.@.@.@.@@..@..@@@@@@..@@@.@@.@.@@.@..@.@.@@.@@@@@@.@@@@@..@@@@...@@@@.@@.@@@.@.@.@.@@.@.@@@@.@..@@@.@@@...@@@@@.
@.@@@@@.@@@.@@.@@@@..@@..@@@@@@@@@@@@@@...@@..@@@@@@.@@.@@.@.@@@..@@@.@@.@@@.@@@@...@@@@.@@.@@@@@.@@@@.@@@@@..@@.@@@.....@@@@@@@.@@@@.@@
@@.@@@.@.@@@.@.@.@@@@@@@@@@@@@.@.@.@@@.@.@..@@@@@..@..@@@.@@@@@@...@@.@.@@@.@@.@@@@@@@...@@...@@.@.@@.@.@.@@.@@..@@.@@@@@@@@...@.@@@.@@.
.@@@@@.@@@@@.@@@@@...@@.@.@@..@@@@@..@@@@@.@@@@..@@@@..@@@@..@@.@...@@.@@...@@@.@@.@@@@@@@..@@.@.@..@@@@.@@@.@@..@@@@@....@.@.@@@@@..@@@
@@..@.@@.@@@@.@..@.@@.@@@@.....@@@.@@.@.@.@@@.@...@..@@@..@@@..@@@..@.@@.@...@@@.@@@@@@@@@@.@@@@...@@.@@..@@@..@@.@..@@@.@@@@.@@@@.@..@@
......@..@@@@@@@.@..@@@.@.@@.@.@@@.@@@@.@@@@.@@@@@.@@.@@.@@@@@.@@@@@...@@@@@@..@@@.@@.@.@@@@@@@@@@.@@@@@.@@@@@.@....@@@@@@@@.@@@@@....@@
..@@@@@@@@@@..@@...@@.@.@@.@@@@@@@@.@..@@@...@@.@@@@@.@@@@@@.@@.@@@.@@.@@@@..@.@@@.@.@.@@@..@.@..@@@@@..@@@@@..@.@@@@..@@.@@@@..@@@...@@
.@@@@..@@...@.@.@@@@.@@@@@@@@.@@@..@@.@.@..@..@@@@@@@.@@@.@.@@@...@@@@@@@@@@@.@@@@@.@@@..@@@.@@@@@@@.@@.@@@@@@@@@@.@@@.@@@@@@@@@@.@.@@.@
@@@@@.@@@@@@.@..@@@..@@@@@.@.@@.@...@..@.@@..@.@@@@.@..@@..@.@.@@@..@@@@.@@@@.@.@..@@@@@@@.@@.@.@@.@.@@@@.@@.@@@@@..@@.@...@.....@@.@@@@
.@@@.@.@@@@..@@@.@.@@.@.@@@@@@@...@@@..@@..@@@@...@@@@@@@.@..@@@@@.@@@@...@@@@.@@@@@@@@@@.@@@@@..@@@.@@@@@.@@@@.@@@@@@.@.@.@@.@..@@..@@@
@..@@.@.@@@@@@.@..@@@.@@@...@.@.@@.@.@..@...@@@....@@.@@@.@...@.@@.@.@@@..@@...@.@@..@.@@@@@@@..@.@@.@@@@@.@@@@@@@@@@@@@@@@@...@@@..@..@
@@@.@..@@@@..@@..@@@.@.@@@@..@@@@@.@.@@@.@@@.@@@.@@@@.@...@@@@..@@@@.@@@..@@@.@@@@.@@@@@@@..@@.@@@@@@@@.@@.@@@@@.@@@......@@.@@@.@@@@@..
@@@@@@@@.@@@@@@@.@@..@...@@@@@..@@@@@.@@.@@@.@....@@@@.@@.@.@@@.@@@@.@@..@@@@@@@@@@.@@@...@@@@@...@@@.@@.@.@@@.@.@@@@@@@@@@.@...@@@@..@@
@@@.@@.@@@.@@@@@.@@.@@@@@@@@@@@@@@.@@@@.@.@@@@...@@@.@..@.@..@@@....@.@@.@@@@@@@.@@@@..@@...@@@@@@@@@@@@@..@@.@..@.@.@@@@@@@@@@@@@@@.@@@
@@.@@.@@.@@@@@@.@@...@@@.@..@@.@@@@@@....@@@@@..@@@.@@@@@@..@@.@@@@..@@@@@@....@.@@@@@.@..@@@....@@@..@.@@.@..@.@@.@@.@@.@.@@@@@.@@@@..@
.@@@@@@@.@@@@..@@@.@@@.@@@.@.@.....@...@@@@@@@@@@..@@...@@.@@@@@@..@@@...@..@@@@..@@.@@.@.@@@@.@@.@.@@@.@@@@@@.@@.@@..@.@@..@@..@..@.@@.
@@@@@@@@..@@..@@@@@@..@@.@..@@.@.@.@@....@@.....@@@@@@.@@@@.@@..@@@.@...@@.@@@.@...@@..@@@.@@@..@@...@...@@@@@@@.@@@@...@.@@@@@@@.@.@..@
@.@.@.@@@@@@..@@@.@.@@@@.@.@..@.@@.@@@@@@@.@@@.@@@@.@.@........@@.@..@.@@.@@@.@@..@@@@..@@..@...@@@@.@@@.@@@@@.@@.@@@.@.@@@@@@@.@..@@..@
@.@..@@.@..@@..@@@.@..@.@@.@@@..@@@@@..@@..@.@....@@@@@@@...@@@.@@@@....@.@@..@@.@@@@@...@@@@@@@@@@.@@..@.@@@@.@.@@.@@@@.@@@@.@@@@@@.@@.
.@@@@@@@@@@@.@@@@@.@@@@..@@@..@.@@@...@....@@.@@@..@.@@@.@@..@@@.@@.@@@.@.@@@.@..@....@@@@...@@@@@@@.@@@@@.@@@..@@.@@@..@@@@@@@@@@@@..@.
.@..@@.@@@@.@@@@@@..@...@.@@.@@@.@@@@@@@@@..@@@.@..@@.@@@@@@.@@.@.@.@.@@@@@@@.@@@@@@@@.@..@@.@@@@.@.@@@@@.@.@.@...@..@.@.@@...@@@@.@@@@@
@@@.@...@@@@...@@@.@@@@.@@..@@.@@@@@..@@..@@.@.@...@..@@.@@.@@.@.@.@@@@.@@@@@.@.@@@.@.@@.@@..@@@.@.@@.@.@.@.@.@@@@@..@@.@.@@@..@@@@@@@@@
.@@@@@.@@@.@.@@@@@@@@@@@@..@@.@..@.@..@@.@@@@@@@@@.@@.@@...@@@@@@.@@@@.@@.@@@@@@@@.@@@@@@@@@@..@@@@.@....@.@.@@@@@@.@@@@@@@.@..@@@@.@.@@
@@@@..@..@.@@@@@..@@@..@@@@@..@.@@@.@@.@@.@.@@.....@@.@.@@@.@.@@@@.@@@@@@@.@@..@.@..@@@@@@@@@.@@@.@@@....@.@.@@.@@@@..@.@@@..@.@.@.@@.@@
@@@@..@@@@@@@@.@.@@@..@@...@@@@@@@@@.@@@@@.@..@@.@@@.@.@@.@.@.@@@@.@.@@@@@@@@@@@@...@@.@@@@.@@@.@@.@@@@.@...@@@@@@@@.@.@..@@@@@@@.@@...@
.@@@@@..@.@@.@@@..@.@..@...@@....@@@@@@@@@.@.@@.@.@@..@..@@@@.@.@.@..@@@@@.@@.@..@@@.@.@@@.@@@.@@@.@@@@@@@.@@..@.@@.@@...@.@@@@.@..@@@@@
@.@@@.@.@..@@.......@@@...@@..@@@.@@..@..@.@@@@.@@...@@.@@@.@@@@@@@.@.@.@@@.....@..@@.@@.@...@@@...@.@.@@@@@@@@@@@.@@@@.@@@...@.@@.@@@.@
@..@.@@@@.@@@@@@@@@@.@@@@@@@..@@@@..@@@@..@@.@@@@@@@..@.@.@@.@@@@@@@@.@.@.@.@@@@@@@..@@.@@@@@..@@@....@@@..@@@@@@@@@@@@.@@@.@@@@@.@@.@@.
@@@@..@@@...@@@@.@...@@@@.@@.@@@@.@@..@.@@@@@@@.@@@@.@.@@@..@@@@@@..@@@.@.@.@@@@@@@.@@...@@..@.....@.@@@..@..@@@.@@.@..@@...@.@@@.@@@.@@
@@@@@@.@.@@.@.@..@@@.@.@.@@@@@.@@@@@..@@@@@@@@@@@@@@.@@@@@.@.@.@@@.@@.@@.@.@@.@@@.@@@@..@@@@.@@@.@@.@..@@@.@@..@@@@@@..@.@@@@@..@.@@..@@
@@@..@.@.@@@...@@@@@@.@..@@@..@.@@...@@@@.@@.@@@.@@@@..@@@@@@.@@@@.@@@..@@.@@@..@@@@..@@@@@@....@@@..@@@.@.@@@@.@@@@.@@@@@@@..@@@@.@.@@@
@@@.@@.@@@.@@..@@@.@@@@@.@@@@@.@.@@@@@@..@@@@@.@@.@.@@..@@....@@.@..@@..@...@@@.@.@.@@.@@@@.@@@.@@@.@@.@@.@@@@@...@@..@@@@...@.@@@@@..@@
@.@@@@@@@..@@@@.@.@..@@@@.@.@.@....@...@@...@.@@.@@@@@@..@@..@@..@@@.@@@@@@@...@.@.@.@.....@@@@@@@.@..@.@@@@.@@@@@@@@@@@@..@.@@@..@...@@
@@.@@@@..@@@@.@@@@..@@..@.@..@@..@..@@@@@...@.@..@@..@.@@@@@@@.@@.@@@@...@.@@@@@@@@@@@.@@.@...@.@@@@@@@@.@..@.@@.@@@.@@@.@@...@@.@@@@..@
@.@..@@@..@@@..@@@..@...@@@@.@@@@@......@...@.@..@@@@@@..@@...@@@@@@..@.@..@@.@@@@@@@.@..@@@.@@.@.@.@@...@..@.@......@@.@@@@@.@@@.@..@.@
@@@@@.@@.@@@@@@@@@@@@@@.@@@.@.@@@@@@@...@@@@..@@@..@.@.@@@@@@.@.@@@@@@@@@.@.@@@@@.@@@.@@@@@.@@@@@@@@.@@@@@@@@@..@..@@@@.@@@@@..@..@@@@@@
@@.@@@.@.@.....@@@...@.@@..@@..@@@.@@.@.@.@@@..@@@..@@@.....@@@@@@@.@..@@@@@..@@@@@.@.@@@.@.@@@@..@.@@@@.@@@@@@.@@..@@@@@.@.@@@@@@@..@@@
.@@.@..@.@..@@@@.@@@.@@@@...@@@@@@@@.@@@@@@@.@@.@@@@@@@.@@@@.@@.@@.@@@@@@.@@@@@@.@.@..@@@.....@@@...@.@@...@.@@..@.@@@@@@@@.@@...@.@@@.@
.@.@@@@@@@.@@@.@.@@@@@@....@...@@..@@@.@@@.@.@@..@@@.@@..@@@@.@@@..@.@@@@..@..@@@...@.@.@...@@.@@@@@@@@...@.@@@@@@@.@@@@@@.@.@@@@@@@.@@@
.@..@@...@.@@@@@....@@.@@.@@@@@@..@@.@@@@@@@.@@...@.@@..@@...@@@.@@@@..@@@@@@@.@@@@@@@..@.@..@@@@@@@@.@@@@.@@@.@.@@@.@@..@@@@@.@..@.@@.@
.@@..@@@.@@.@@@@.@.@@@@@@..@@@@@.@@@@...@@@.@.@@.@@.@@.@@@....@@.@@.@..@@@.@..@@@@@@.@.@@.@..@@@@..@.@@...@..@.@@@@.@..@@..@@@.@.@.@@@@@
.@@@.@@@@@@@.@@@@.@@@.@@@.@@@@..@@..@@@@@..@@@..@.@@@@@.@..@.@@.@@@@..@@@...@.@@@@@@@.@.@.@@@@@@.@.@..@.@@@@@@..@...@.@....@@@@@@..@@@.@
@@....@@@@@@@@@@@@.@@@@..@@.@@@@@.@@@.@@@@....@...@..@@.@@@@...@@.@.@@.@@@@@@@@@@.@@...@@@@.@.@.@..@@@...@.@...@@@@@@.@@@@.....@.@.@@@.@
@@..@@.@@@@@@@...@@@...@@..@..@..@.@@..@..@@@@.@@...@....@@@@@.@..@@@@@@@.@@@...@@@@..@.@@@@..@@@@.@.@.@..@@@@@@@@@@@@.@@@@.@@.@..@.@@.@
@@.@.@@@@.@..@..@.@@.@@@.@@@..@..@@.@@@@.@@@@.@@..@@@.@@@@@.@@.@@.@@@@@...@@@..@@@@.@.@@...@@..@...@@..@.@@@..@@@@@@.@.@@@.@@@@@@@.@..@.
@.@@@@.@.@.@@.@@@.....@@@.@@@@@.@@@@@@.@..@.@@.@@@@@@.@.@@@@..@@@@@@@@@@.@...@...@.@@@@@...@@@@.@@@@@@..@@.@@@.....@@@...@@@@@@.@@@@.@@@
@@@@@@@.@@.@@@.@@@.@@.@..@@@..@@..@@...@..@.@@@@.@@@.....@.@@.@.@.@@@.@.@@.@@@@.@@@@@.@@....@.@@@.@..@@..@@@.@.@@@@@.@@.@@.@@@@.@@@@@...
@@@@@@@@@@.@@@@@@.@@@@.@@@.@@...@@..@@.@@@@.@@@@.@@.@@@@@@..@.@.@@@@@..@@..@@.@.@..@@@@@.@.@@.@.@.@.@@@@.@.@.@@@@.@.@@@.@@@@.@..@@.@@@.@
@..@.@@..@@.@..@.@@@@@.@@.@@@@..@@@@@..@@@.@@@@..@@@@.@@@.@@.@.@@@.@@@@...@@@..@.@@@..@...@.@.@@..@@.....@...@@@...@@@@@@.@@@@.@@@@..@..
@@.....@@@@@@@..@...@@@@@@@.@....@@.@.@@@@@.@@@..@.@.@..@@.@@@@.@@@.@@..@.@@@@@@..@@@.@@@@.@@@@@.@..@.@.@@.@@@@@@@@.@@.@@.@@.@@@...@@..@
@@....@@@@@..@.@.@@@@.@@.@@.@@@@@@@.@.@@.@.@@...@@@@@@@.@.@.@@@@@@@.@@.@.@@.@..@@.@@@.@.@@@..@@@@@..@.@.@@@@..@@@.@.@@@@.@@@.@@..@@@.@@.
@@...@.....@@@...@@@@@..@@.@@@@.@@@@.@@@.@.@@@@.@@@.@@@.@@.@.@@..@@.@@..@@.@.@@.@.@.@@@@@@.@@@.@.@.@...@@.@@@@.@@@@.@.@@@@.@@@@@@...@.@@
@@@.@...@@@@..@.@@..@@@..@@@@..@.@.@..@@.@@@@@..@@@@..@@@@@@@.@@@@.@..@@@@..@.@@@@@.@..@@@@@@.@@@..@..@.@@@@@.@@.@@@@@.@@..@@@@....@@@..
.@@.@@@@@@..@.@.@.@.@@@@@@...@@..@@@@@.@@@@@@@@@@.@@@@..@@@@@@.@..@@.@@@@@.@@@.@.@@@@@@..@@@@@.@@@@@@.@@@..@@@@@.@@@@@@@@.@@...@@.@@.@@@
@@.@..@..@...@.@.@@.@.@@@@@@@@..@@.@@.@@.@..@@@@@...@@@@.@..@.@@@...@.@@@@@.@@.@@@@..@@@@@.@@@@@.@.@@@@@@@@.@@@@....@.@@@....@@@...@.@.@
.@@@.@@..@@@@@.@....@@@@@@@.@@@@@@@...@..@@@@.@@@@.@@@@@@@@@....@.@..@@@@@@@..@@.@..@@....@@@@....@@.@@.@@@.@@@@@@@@@@.@.@.@@@@..@.@@.@.
..@@...@@..@@@@@..@.@@@..@@..@@.@@@...@@@.@@.@.@.@..@..@@.@@@..@.@@.@@@@@@@@@@@..@.@@@@..@@@...@@@...@..@@..@@...@.@@@@..@@.@.@.@..@@@@@
@.@....@@...@@@@.@@@.@..@@@@@.@...@.@@@..@.....@.@@@@@.@..@.@@.@..@.@@@@@@@.@.@@.@@@@@@.@.@@@@@@@@@@@@@@@@@.@@@@@@@@.@@@.@@.@.@@@@..@.@@
..@..@.@.@.@...@@@@@@@@@@....@@@@@@@@@@@.@.@@@@.@@@.@@..@.@@.@.@..@@.@@.@@@@@.@@@@@@.@@.@@.@@@@@.@..@@..@@...@.@@@@@.@.@..@@@.@.@@@@.@@.
@@.@@@.@.@@@@@@@.@@@@@.@@@.@..@.@..@@@...@.@@@@.@...@@...@@@.@.@@@.@@.@@@@@.@.@@@...@@@@@.@@.@@@.@@@.@@@.@.@@..@@.@.@@.@..@@@..@@.@@@@@@
@.@@...@@..@@@..@.@@@@@@@.@@@@@@@@.@@.@@@@@@@@..@@@..@@.@@@.@@..@.@@..@@@@@@@@....@@@@@@@@..@@@@@@..@.@@@.@@@@@.@@.@@@..@@@..@@@@@.@@.@@
@..@.@@.@@.@......@.@@.@@@..@@@@@@@@@@@@@@@@@@.@@@@.@@@@@@..@@@@@@@@@.@@@.@..@.@@....@@@@@.@.@...@...@.@@@.@@.@@.@@..@@@@@.@@@@@@@.@@@@@
@.@@@@@@.@@..@.@.@.@.@.@@.@.@.@@.@@.@@@@..@...@..@@@.@@.@@@.@.@@.@@@@@@@@@..@..@@@@@@..@@.@.@...@@.@@@@@.@@.@@..@.@.@@@@..@.@@@..@@@@..@
@@@..@@@@.@@@@@@@.@@.@@..@@..@@.@@@@@@@..@@@@@.@.@@..@.@@@@@@@@@.@.@....@...@@.@@.@.@.@@@@@@.@@@@...@@@..@..@.@@..@@..@.@.@@@@@@@@@.....
@@@@@.@@.@@@@@.@@@@.@@.@@@@..@@......@..@@@..@...@@@@..@@.@@...@@@@@@...@@.@@@.@@@@@@.@@@..@.@@@@@@@@.@@@@..@.@...@@@.@@.@@@@@@@@@@@.@@@
@@@@@@.@@.@@@@@@@@...@.@@@.@@@...@@@@@@......@.@.@@@@.@@@.@.@@@@@@@@@.@..@@@@@.@@.@@@..@@@.@@@@.@.@@.@@@@@.@..@@@.@..@@@@.@@@.@.@@@@@@..
....@@..@@@@@.@@.@@.@@@.@@@.@@.@.@@@.@@@@@@.@@.@@@@@@@.@@@@@@@@@@..@@@.@@.@@...@.@@..@@@.@@@@.@.@.@.@@@@.@..@@@@..@.@@.@..@..@..@@@@@@@@
@.@@@@..@.@..@.@@@@@@@@@..@@@@.@.@..@@@@@.@.@@@@.@@@@@@.@@@...@@..@@.@@.@@@@@@@@@..@.@.@@.@@@.@@@@@.@.@..@@@@@..@.@@@@@@@@..@..@.@.@..@@
.@@.@@.@@@.@@@@@@.@@.@@..@@.@..@@@@@.@@@@@@.@@@.@...@@..@@@.@@@..@@.@.@@@@..@.@.@...@.@.@@@..@@@.@@@@@.@@..@@...@..@@@@@.@@@@@@.@@@@..@.
@.@..@@@@@@@@.@..@@@.@@....@.@@@.@.@..@@@@@@@@@@@..@@@@@@@@@.@..@@@..@.@@@..@@.@@@@...@@@.@.@@.@.@@@@@@.@..@..@@@..@@@.@@@.@...@@.@@.@.@
@@@.@@@.@@@@.@@@@@@@@...@@...@@..@@@@@@@@@@.@@@@@@@@@@.@@@.@.@@@@...@@@@.@.@@@@@.@@@.@@@@@@@@@..@@@@@.@@@@@@.@@@@@@@@@@@@@@@.@@.@@..@.@@
.@@@..@@@.....@@@..@.@.....@@..@@.@@@.@@@@@@.@@@@...@@@.@...@@@..@.@@@@.@@@@@@@@.@..@..@@@@@@.@@.@.@@@@@.@@.@@@@@..@..@@@.@@@.@@.@@.@.@@
.@@@@@@@@.@@.@@.@@@@@..@@@@@.@@..@@.@@@.@.@...@@..@@@.@@@@@@@@.@@@..@@@@.@@.@..@@@@@@@@.@@@@@@@@@.@@...@@@@@@@@@@.@@@@@..@@@@@@@.@@..@@@
..@..@@@@.@@.@@@.@@@@@...@@@@...@@.@@@..@@.@@@@@@@@..@@.@@@.@@@@@@@@@.@@.@.@..@@@@.@.@@.@.@..@..@@.@@.@@@@.@@@@@@@.@@@.@.@@@@@.@@@@..@.@
....@...@@.@@.@@@@...@.@@@@.@.@@.@@..@@@..@....@@@.@@@@..@.@@.@...@@@.@@@@....@@@@....@.@.@.@@@@@@@@@@.@@@@.@..@@...@.@@@@@@.@@...@.@..@
.@.@@@.@@@@.@.@@@@..@@@@@@..@..@@@..@@@@..@@@@@.@@@.@@.@..@@@@@..@@@..@@@@@@..@@..@@.@@....@.@....@@..@@@@@@..@@..@@@@..@@@@@@@.@@.@@@@@
@@.@@..@..@@@@@@@@@@..@.@.@@@@@@@@@@@@@.@@@@@.@..@.@@.@.@@@@@@.@.@@..@@.@@@.@@.@@..@..@...@.@.@@@..@....@@@@@@@..@@.@.@@@@...@..@..@@@@@
@@@@@@.@..@.@@@@@.@@@@..@@@@..@@@@@@@...@@@@@@@@.@.@.@@@@@@@.@@@.@@@.@@@...@.@@@@@@.@.@@@@.@@@@@.@@@...@@@..@.@@....@..@.@@@.....@@..@@@
@@.@@@@@..@@...@.@.@@.....@@@..@@.@.@.@.@@@.@.@@@@@@.@.@....@@@@....@@@@.....@.@@@@@@..@..@.@.@.@..@@@@@@@@.@@@.@@..@@.@@.@.@@.@..@.@..@
@...@.@@.@@@@.@.@.@@.@@.@@@..@@.@..@@...@@@@..@..@.@@@.@..@@.@@@@@@@@@..@@.@@.@.@...@@.@@.@@@@.@@@@@@@.@.@@@@..@.@.@.@@@.@..@.@.@@@@@@@.
@@..@@.@@@@.....@..@@@.@@..@@..@@@@.@@@.@@.@@...@@.@@.@@@..@@@@@...@@@@..@...@@@@..@.@@@@..@@..@@.@@@@@.@@.@@.@@@@..@@@@@..@.@@.@@.@.@@@
.@@@.@.@@@.@@..@.@@@@@@@@.@@.@@.@@@@@@@@.@@.@.@@@@.@@.@@@@...@@...@@.@.....@.@...@.@@@.@.@.@.@@@.@.@.@@..@..@.@@@@@...@..@..@@@...@..@.@
@@@.@.@@..@@@@@@@.@@.@.@@@@@.@@@@.@.@.@...@@.@.@@@.@@@.@@.@@@@@@@..@@@@.@@@...@..@.@@@@@@@@@@@.@@@.@.@@@@@@.@@@@.@@@@@.@@@@@@@.@@.@@.@..
.@@.@@@.@@@..@@@@@@@@@@@.@@@.@@@.@@..@@.@@@@@@@@@.@.@@@@.@..@@.@.@@@@@@.@.@@.@@..@@@.@@@@@@@.@..@@.@@..@.@.@@@...@...@.@@@@@@..@@@@@..@@
@@@@@@@@@.@@.@.@..@..@@@@@.@@.@@@@@..@.@@@@.@...@@@.@......@@.@...@.@.@.@.@@....@@.@@@.@@@@@.@@@...@@.@...@@@..@@..@.@.@.@.@@@.@@..@@@@@
.@...@@@@.@@@.@@..@@@...@@@@@@.@.@.@@@@@@@@.@@.@@@...@@@@.@@@@@@..@.@...@@@@@@@@@.@@@.@@@@@@@@@@@@@@@@@.@@@@.@@..@.@@@@.@@@.@@.@@@@@@.@@
@@@@@..@@@.@@@.@@@@@@@@@..@@@.@@.@@.@@@@..@.@.@.@@@..@@.@.....@@.@@@.@@...@@.@@@@@@.@.@@@@...@@.@@@@@@@@@@@@@.@..@@.@..@@@@.@@.@@.@@@...
.@@@@@.@@@@@@@@@..@@@@...@@.@@.@@@.@@@@@..@@@@@@..@....@.@.@@@@@@@.....@@@@@@@.@@@@@@..@@.@@@.@.@.@@@.@@@@.@@@@.@@@@.@@@....@.@@@@@...@.
.@@@@@@@@.@.@@..@@@.@.@@@@@.@.@@.@@@.@@@@@@..@.@@@@@@@...@.@@.@@.@..@@..@.@.@@.@@@@.@.@@@.@@@@@@@@.@@@@@@@@@@@@@.@@.@..@@.@@.@..@.@@@@@@
.@..@.@..@.@..@@.@@@@@@@.@.@....@@....@@@.@@.@...@@@..@@@@@@@@.@.@@.@...@@@@@@@@@@@.@@@@...@@@@@@.@...@@@@.@@..@@@@@@...@@.@@@@.@@.@@@@@
..@@@@..@.@@@.@@.@..@@@@@.@@..@...@@@.@@@@@@.@..@@@@@@.@@@@@@@.@@.@@@..@.@@@.@@@@@@..@..@@@@@@..@.@@.@@..@@@@@@@@..@.@@.@@@...@.@@@@@@@@
@.@@@@@.@@@@.@@@.@@@@..@...@@.@@..@@.@.@@@.@@..@@@@..@@@@@@@@@@@@@..@@@....@@@@@......@@@@.@@@.@..@@@.@.@@..@@@..@@.@..@@.@.@@@@@@.@@@@@
@.@@@..@.@@@..@@@.@@@.@@.@.@.@@@.@@@@@...@@@@@@...@...@@@@@@@@@@@.@@@@..@@@@@..@@@@.@@@@..@@..@...@@@@@@.....@@@...@@@.@@@@...@@@@@@@@.@
@@@.@@....@@.@.@@.@@.@.@@.@.@.@@@@@@@@@.@@@@.@@@.@@@@@..@@.@@@@@@@.@.@.@.@@@@@@.@@@@@@@@@.@@@@@@@@@@@@..@.@.@@@.@.@@..@@.@.@@..@..@.@@.@
@.@....@.@.@@.@@..@@.@....@@.@.@.@..@.@@@.@.@@..@@@@@@@@@@.@@....@..@@@@@@@.@@@@@@@@.@.@@@...@@@@....@@...@@..@@@@.@@@@@@.@..@@@@..@@..@
.@@....@.@@.@..@@@@@@@@.@..@@@@.@@@@@..@.@@@....@@.@...@@@.@@@..@.@...@@@..@........@...@@@.@..@@.@@@@@@@@.@.@.@.@.@...@@@@@@..@@@@@.@@@
@@@@..@.@..@.@@@@..@..@@@..@@...@@@@@.@.@.@@@.@@@@@...@@@@@..@@@@@@.@....@.@.@@@@@@@@@.@@@@@@..@@@.@.@.@@.@.@@@.@.@@@@@@.@@@@@@@...@@@@@"""
#10x10 matrix


rolls_list: list[list[str]] = []

for line in test_input.splitlines():
    internal_list: list= []
    for roll in line:
        if roll == "@":
            internal_list.append(1)
        elif roll == ".":
            internal_list.append(0)
    rolls_list.append(internal_list.copy())
    internal_list.clear()
    
solution = 0


np_rolls_list = np.array(rolls_list)

kernel = np.array([[1,1,1],[1,0,1],[1,1,1]])    #Auswahlfunktion. Alle umliegenden Zellen, aber nicht die eigentliche Zelle

while True:


    convolved_array = convolve(np_rolls_list, kernel, mode="constant", cval=0)  #Falten. Setzt den Wert jeder Zelle auf die Anzahl der Nachbarn

    active = np_rolls_list != 0 # Maske erstellen, welche bei alle 0 False ist, um nur dort die Nachbarn zu z√§hlen, wo auch Rollen sind

    convolved_array_new = np.where((convolved_array < 4), 1, 0)  # An allen Stellen wo unter 4 Rollen Nachbarn sind, und auch eine Rolle existiert, 1 setzen, sonst 0+

    result = convolved_array_new * active   #Miteinander multiplizieren, setzt alle Stellen wo keine Rolle ist auf 0
    
    rolls_removed = result.sum()
    
    solution += rolls_removed
    
    removed_mask = np.where(result == 0, True, False)
    #print(result)
    #print(removed_mask)
    np_rolls_list = np_rolls_list*removed_mask
    
    if rolls_removed == 0:
        break
    


print(solution)

